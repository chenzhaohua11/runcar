<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	<style>
	    *{
	    	margin:0px;
	    	padding:0px;	
	    }
		.road{
			height: 100vh;
			width: 50%;
			margin: 0px auto;
			position:relative;
			background-color:#808080;
			border-left:3px solid black;
		    border-right:3px solid black;
		    overflow:hidden;
		    display:-webkit-box;
		}
		.track{
		-webkit-box-flex:1;	
		height:100%;
		position:relative;
		border-right:3px dashed white;
		margin-top:-100%;
		height:200%;		
		}
		.last{	
		border-right:0;	
		}
		.car1{
			width: 20%;
			height: 20%;
			position:absolute;
			background:url(img/img2.jpg);
			background-size:100% 100%;
			top:80%;
			left:40%;	
		}
		.car2{
			width: 20%;
			height: 20%;
			position:absolute;
			background:url(img/img1.png);
		    background-size:100% 100%;
		    top:0;
			left:40%;	
		    }
		 
		
	</style>
	
	</head>
	<body>
	<div class="road">
		<div class="car1" id="car1"></div>
		<div class="track" id="track"></div>
		<div class="track"></div>
		<div class="track"></div>
		<div class="track"></div>
		<div class="track last"></div>	
	</div>
	<script src="js/jquery-1.12.3.min.js"></script>
	  <script type="text/javascript">
	  	 move();
	  	function move(){
	  		$(".track").animate({"margin-top":"0"},1000,"linear",function(){
	  			back();
	  		})	
	  	}
	  	function back(){
	  		$(".track").css({"margin-top":"-100%"})	
	  	    move();
	  	}
	  	
	  	
	 var car=document.getElementById("car1");
	 var wid=document.getElementById("track").offsetWidth;
	  window.document.onkeydown=function(event){
	  	var event=window.event;
	  	console.log(event.keyCode);
	  	switch(event.keyCode){
	  		case 37:
	  		if(car.offsetLeft>0){
	  		car.style.left=car.offsetLeft - wid+ "px";		
	  		}
	  		break;
	  		case 39:
	  		if(car.offsetLeft=0 ||car.offsetLeft<3*wid){
            car.style.left=car.offsetLeft + wid+ "px";
	  		}	
	  		break;
	  	    case 88:
	  	    $(".car1").animate({"opacity":"0"},500,function(){
	  	    	car.style.opacity=1;
	  	    });
	  	    break;
	  	}
	  }
	var t=1000; 	
	var interval=setInterval(creat,1000)
	function creat(){
		var newcar=document.createElement("div");
		newcar.className="car2";
		newcar.style.left=parseInt(Math.random()*5)*wid+"px"; 
		$(".road").append(newcar);
		if(t>=100){
		  t=t-20;
		  }else{
		  t=100;
		}
		$(".car2").animate({"top":"100%"},t,function(){	
			$(this).remove();
		})	
	}
	
	  </script>
	
	
	</body>
</html>
